<system>
  log_level info
</system>

<source>
  @type http
  port 9880
  bind 0.0.0.0
  body_size_limit 32m
  keepalive_timeout 10s
  
  <parse>
    @type json
  </parse>
</source>

<match products>
  @type copy

  <store>
    @type opensearch
    host opensearch
    scheme http
    port 9200
    flush_interval 1s
    id_key uuid  # Use 'uuid' field as the document ID
    index_name "#{ENV['OPENSEARCH_INDEX_NAME']}"
  </store>
  <store>
    @type stdout
    <format>
      @type json
    </format>
  </store>
</match>

#Catch all other logs
<match **>
  @type stdout
  <format>
    @type json
  </format>
</match>